{"is_source_file": true, "format": "JavaScript", "description": "This file defines a storage service abstraction for localStorage in a web application, including functions for initializing data from a seed JSON, safely getting/setting items, and managing expense data with versioning and schema considerations.", "external_files": ["/assets/seed-expenses.json"], "external_methods": ["fetch"], "published": ["StorageKeys", "getAll", "setAll", "addItem", "updateItem", "removeItem", "clear"], "classes": [], "methods": [{"name": "defaultMeta()", "description": "Creates a default meta object with version and timestamp.", "scope": "", "scopeKind": ""}, {"name": "safeParse(json, fallback)", "description": "Safely parses JSON strings, returning fallback on failure.", "scope": "", "scopeKind": ""}, {"name": "safeSetItem(key, value)", "description": "Safely sets a localStorage item with error handling.", "scope": "", "scopeKind": ""}, {"name": "safeGetItem(key)", "description": "Safely retrieves a localStorage item with error handling.", "scope": "", "scopeKind": ""}, {"name": "loadSeed()", "description": "Fetches the seed expenses JSON from static assets.", "scope": "", "scopeKind": ""}, {"name": "readOrCreateMeta()", "description": "Reads metadata from storage or creates default if missing or invalid.", "scope": "", "scopeKind": ""}, {"name": "ensureInitialized(key, bootstrapLoader)", "description": "Initializes storage key with seed data if not already set, considering versioning.", "scope": "", "scopeKind": ""}, {"name": "getAll(key)", "description": "Retrieves all stored items under a given key, with seed bootstrap for expenses.", "scope": "", "scopeKind": ""}, {"name": "setAll(key, value)", "description": "Replaces the entire dataset for a storage key.", "scope": "", "scopeKind": ""}, {"name": "addItem(key, item)", "description": "Adds an item to a collection stored under a key.", "scope": "", "scopeKind": ""}, {"name": "updateItem(key, predicate, updater)", "description": "Updates an item in a collection based on a predicate.", "scope": "", "scopeKind": ""}, {"name": "removeItem(key, predicate)", "description": "Removes an item from a collection based on a predicate.", "scope": "", "scopeKind": ""}, {"name": "clear(key)", "description": "Removes a key from localStorage.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "console.error", "JSON.parse", "JSON.stringify", "new Date().toISOString"], "search-terms": ["localStorage persistence", "expenses seed JSON", "schema versioning", "storage initialization", "expenses_data_v1", "seed-expenses.json"], "state": 2, "file_id": 13, "knowledge_revision": 50, "git_revision": "82f8d0b293a4cd8e82e95b687dfddb912354bd65", "revision_history": [{"27": ""}, {"50": "82f8d0b293a4cd8e82e95b687dfddb912354bd65"}], "ctags": [{"_type": "tag", "name": "EXPENSES", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^  EXPENSES: 'expenses_data_v1', \\/\\/ bump suffix when schema changes$/", "language": "JavaScript", "kind": "property", "scope": "StorageKeys", "scopeKind": "class"}, {"_type": "tag", "name": "META_KEY", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^const META_KEY = 'expenses_meta_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "StorageKeys", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^export const StorageKeys = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "addItem", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^export function addItem(key, item) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, item)"}, {"_type": "tag", "name": "clear", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^export function clear(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "defaultMeta", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^function defaultMeta() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "ensureInitialized", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^async function ensureInitialized(key, bootstrapLoader) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, bootstrapLoader)"}, {"_type": "tag", "name": "getAll", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^export async function getAll(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "loadSeed", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^async function loadSeed() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "readOrCreateMeta", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^function readOrCreateMeta() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "removeItem", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^export function removeItem(key, predicate) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, predicate)"}, {"_type": "tag", "name": "safeGetItem", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^function safeGetItem(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "safeParse", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^function safeParse(json, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(json, fallback)"}, {"_type": "tag", "name": "safeSetItem", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^function safeSetItem(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}, {"_type": "tag", "name": "setAll", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^export function setAll(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}, {"_type": "tag", "name": "updateItem", "path": "/home/kavia/workspace/code-generation/expense-tracker-and-manager-8204-8213/expense_tracker_frontend/src/services/storage.js", "pattern": "/^export function updateItem(key, predicate, updater) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, predicate, updater)"}], "hash": "fe6eaf91ffc61082702007dd176edafb", "format-version": 4, "code-base-name": "expense_tracker_frontend", "filename": "expense_tracker_frontend/src/services/storage.js", "fields": [{"name": "EXPENSES: 'expenses_data_v1', \\/\\/ bump suffix when schema changes", "scope": "StorageKeys", "scopeKind": "class", "description": "unavailable"}]}